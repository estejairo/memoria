\gcnote{Falta un parrafo introductorio sobre lo que se trata en este capitulo. Cada capitulo debe tener uno.}

\section{Conclusiones}
\label{sec:conc}

Luego del trabajo realizado en esta memoria de titulación se logró cumplir con los objetivos propuestos en la Sección \ref{sec:planteamiento}. Fue posible diseñar e implementar un sistema digital capaz de cumplir con las funciones de adquirir pulsos digitales proveniente de una interfaz de lectura, discriminar la autenticidad de los eventos capturados asociados a muones y comunicar los datos adquiridos a sistemas externos, todo implementado en una tarjeta de desarrollo Trenz consistente en un SoC Zynq 7000 constituido por un procesador y lógica programable equivalente a la de una FPGA Artix 7. Las etapas de adquisición y discriminación lograron implementarse con buffers de entrada para señales LVDS y Shif-registers respectivamente, mientras que la etapa de comunicación se llevó a cabo utilizando una memoria FIFO y comunicación serial implementada en el procesador de la tarjeta Trenz.

Fue posible realizar un diseño escalable mediante el la creación de un sistema modular basado en etapas de adquisición de datos, escritura y lectura de memoria. Dado que la tarjeta Trenz cuenta con 76 pares de puertos compatibles con el estándar LVDS y con 4.9Mb de memoria distribuida en 140 bloques de 36Kb cada uno, es posible implementar con holgura dos sistemas de adquisición en una misma tarjeta, utilizando 32 puertos LVDS, 1 puerto común para señal de disparo y capacidad de almacenar hasta 2.500 eventos. Utilizando los recursos al límite, es factible implementar 4 sistemas de adquisición en una misma tarjeta Trenz, pero reduciendo la cantidad de eventos almacenables a 1.250 antes de llenar por completo la memoria FIFO. Esto no es un problema mientras los datos sean leídos de manera constante o al menos cada 1 minuto, ya que el flujo de muones en el área de detección asociada a 4 detectores corresponde a 900 eventos por minuto, llenando la memoria totalmente en cerca de minuto y medio.

La resolución espacial alcanzada por el detector es efectivamente de 1cm$^2$ mediante el cruce de canales excitados por señales de detección según el esquema de coordenadas indicado en la Figura \ref{img:cuadrantes-ministgc} de la Sección \ref{sec:stgc}. Esta resolución puede mejorar considerablemente mediante un posterior análisis de duración de pulsos detectados en canales adyacentes al vértice de interacción estimado. 

Por otro lado, la resolución temporal del sistema de adquisición diseñado fue de 2,5ns, dentro del rango de los nanosegundos, gracias a la frecuencia de reloj de 400MHz utilizada en la etapa de muestreo. Si bien esta resolución cumple con los requisitos, no es la máxima factible a sintetizar en la lógica programable de la tarjeta Trenz. Para lograr mayores frecuencias de reloj es necesario cambiar el esquema de comunicación entre los módulos de muestreo y buffer de eventos, ya que pertenecen a dominios de reloj diferentes. En un principio, se trabajó sin darle importancia a los dominios de reloj asociados a cada módulo para simplificar el diseño de hardware cumpliendo con los requerimientos de tiempo establecidos, pero durante el desarrollo del sistema de adquisición se tornó evidente la necesidad de implementar una memoria de doble puerto con operación de relojes independientes para permitir una comunicación óptima entre módulos a una frecuencia mayor. También es posible cambiar la manera en que se resetean algunos bloques lógicos, sobre todo aquellos encargados de retener la información de los eventos, logrando tener un \textit{fanout} mucho menor en las señales de reset utilizadas, evitando por ejemplo el restablecimiento de algunos arreglos bidimensionales y dependiendo solo de su inicialización y flujo en las máquinas de estados, tema que no fue considerado al momento de diseñar el sistema de adquisición. Para alcanzar frecuencias de muestreo aún mayores, sería necesario cambiar a plataformas híbridas de adquisición de datos, como por ejemplo utilizando FPGAs en conjunto con chips DRS4\cite{RittDRS4Array} alcanzando tasas de muestreo equivalentes a utilizar un reloj de 5GHz para el caso de esta memoria. Sin embargo, frecuencias por sobre 1GHz no se justifican para la aplicación en sTGC minería, principalmente por la resolución temporal de la tarjeta ASD (no mayor a 1ns).

El haber superado satisfactoriamente la prueba experimental con pulsos digitales emulados sienta precedentes satisfactorios para una posterior prueba con interfaces ASD reales y con detectores sTGC funcionales. La totalidad %\sgcnote{pero el 100\% de lo que hiciste es 100\% representativo de lo que pasaria en la practica? Si envie 1 dato y lo recibi, tambien podria decir que tuve un 100\% de exito.}
de los datos emulados fue muestreado con la resolución temporal esperada, implicando que la existencia de eventos defectuosos es menor al 1\% y asegurando una resolución temporal de $\pm$2,5ns para la duración de las señales muestreadas. Se espera que las tasas de error alcanzadas dentro del sistema de adquisición sean las mismas al probar el sistema con eventos reales, pero podrían presentarse otros errores no considerados en los sistemas de disparo y detección que podrían contribuir al alza de la tasa de error y a la reducción de la resolución temporal de sTGC Minería en su totalidad.


Por último, el trabajo realizado, los sistemas estudiados y las herramientas utilizadas se encuentran disponibles en la enciclopedia digital de CCTVal, así como también en el repositorio de Github \cite{GonzalezMuonRepository}, permitiendo la replicación, mejoramiento y continuación de este proyecto, así como también la oportunidad de adaptarlo a otros sistemas que requieran adquisición de datos en su arquitectura.


\section{Trabajo Futuro}

Para el futuro quedan pendientes muchas opciones de desarrollo interesantes. Por ejemplo, es posible fabricar una tarjeta PCB (Printed Circuit Board) que facilite la interconexión de las interfaces de lectura hacia la tarjeta Trenz. Esta PCB deberá cumplir con el estándar LVDS para señales diferenciales tomando en consideración la simetría e impedancia presente en las pistas que la compongan. Por otro lado, queda pendiente seguir mejorando el diseño digital del sistema de adquisición, poniendo al límite sus posibilidades para mejorar el desempeño en cuanto a resolución temporal. Como se menciona en la Sección \ref{sec:conc} inmediatamente anterior, es factible repensar la comunicación entre distintos dominios de reloj y optimizar la utilización de señales con alta demanda, como lo son las señales de reloj y reset. Además, es posible abarcar nuevos métodos de optimización \textit{post-placement} mediante comandos y análisis de \textit{timing}\cite{XilinxUltraFastGuide} propios de la herramienta de diseño Vivado, que podrían ayudar a alcanzar al menos los 500MHz de frecuencia de reloj.

Finalmente, queda pendiente la realización de pruebas mediante pulsos analógicos provenientes de generadores de señales y circuitos adecuados para estos fines. Además, se deberá probar el sistema con interfaces ASD reales y conectadas a sus respectivos detectores para así caracterizar el sistema completo y observar las propiedades físicas de los muones detectados. Queda pendiente también interconectar este proyecto con el sistema de disparo\cite{Oyanadel2020SistemaSTGC} fabricado por CCTVal en conjunto con el detector y la interfaz de lectura, completando así la primera etapa del proyecto sTGC Minería. Una segunda futura etapa, posterior a la adquisición de datos para detectores de muones, será la etapa de análisis de datos para reconstrucción de eventos de detección, encargada de interpretar la duración de los pulsos capturados asociados a los diferentes canales de detección. Este análisis de datos permitiría el estudio de la posición y la energía depositada por los muones en los detectores, estimar la trayectoria de los muones y determinar la densidad de la materia atravesada en su camino, logrando así generar las tomografías muónicas útiles para el estudio de terreno minero, tal como se requiere en el proyecto sTGC Minería de CCTVal.
